import { nodeListToDebugMaps } from '@markuplint/parser-utils';
import { describe, test, expect } from 'vitest';

import { parser } from './parser.js';

const parse = parser.parse.bind(parser);

describe('Directives', () => {
	test('Standard directives', () => {
		const doc = parse(`
<div
	x-data="{ open: false }"
	x-init="() => { open = true }"
	x-show="open"
	x-text="open ? 'Opened' : 'Closed'"
	x-html="open ? '<span>Opened</span>' : '<span>Closed</span>'"
	x-model="open"
	x-modelable="open"
	x-for="item in items"
	x-effect="() => { console.log('effect') }"
	x-ignore
	x-ref="open"
	x-cloak
	x-teleport="body"
	x-if="open"
	x-id="id"
></div>`);
		expect(nodeListToDebugMaps(doc.nodeList, true)).toStrictEqual([
			'[1:1]>[2:1](0,1)#text: ⏎',
			'[2:1]>[18:2](1,359)div: <div⏎→x-data="{␣open:␣false␣}"⏎→x-init="()␣=>␣{␣open␣=␣true␣}"⏎→x-show="open"⏎→x-text="open␣?␣\'Opened\'␣:␣\'Closed\'"⏎→x-html="open␣?␣\'<span>Opened</span>\'␣:␣\'<span>Closed</span>\'"⏎→x-model="open"⏎→x-modelable="open"⏎→x-for="item␣in␣items"⏎→x-effect="()␣=>␣{␣console.log(\'effect\')␣}"⏎→x-ignore⏎→x-ref="open"⏎→x-cloak⏎→x-teleport="body"⏎→x-if="open"⏎→x-id="id"⏎>',
			'[3:2]>[3:26](7,31)x-data: x-data="{␣open:␣false␣}"',
			'  [2:5]>[3:2](5,7)bN: ⏎→',
			'  [3:2]>[3:8](7,13)name: x-data',
			'  [3:8]>[3:8](13,13)bE: ',
			'  [3:8]>[3:9](13,14)equal: =',
			'  [3:9]>[3:9](14,14)aE: ',
			'  [3:9]>[3:10](14,15)sQ: "',
			'  [3:10]>[3:25](15,30)value: {␣open:␣false␣}',
			'  [3:25]>[3:26](30,31)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[4:2]>[4:32](33,63)x-init: x-init="()␣=>␣{␣open␣=␣true␣}"',
			'  [3:26]>[4:2](31,33)bN: ⏎→',
			'  [4:2]>[4:8](33,39)name: x-init',
			'  [4:8]>[4:8](39,39)bE: ',
			'  [4:8]>[4:9](39,40)equal: =',
			'  [4:9]>[4:9](40,40)aE: ',
			'  [4:9]>[4:10](40,41)sQ: "',
			'  [4:10]>[4:31](41,62)value: ()␣=>␣{␣open␣=␣true␣}',
			'  [4:31]>[4:32](62,63)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[5:2]>[5:15](65,78)x-show: x-show="open"',
			'  [4:32]>[5:2](63,65)bN: ⏎→',
			'  [5:2]>[5:8](65,71)name: x-show',
			'  [5:8]>[5:8](71,71)bE: ',
			'  [5:8]>[5:9](71,72)equal: =',
			'  [5:9]>[5:9](72,72)aE: ',
			'  [5:9]>[5:10](72,73)sQ: "',
			'  [5:10]>[5:14](73,77)value: open',
			'  [5:14]>[5:15](77,78)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: false',
			"[6:2]>[6:37](80,115)x-text: x-text=\"open␣?␣'Opened'␣:␣'Closed'\"",
			'  [5:15]>[6:2](78,80)bN: ⏎→',
			'  [6:2]>[6:8](80,86)name: x-text',
			'  [6:8]>[6:8](86,86)bE: ',
			'  [6:8]>[6:9](86,87)equal: =',
			'  [6:9]>[6:9](87,87)aE: ',
			'  [6:9]>[6:10](87,88)sQ: "',
			"  [6:10]>[6:36](88,114)value: open␣?␣'Opened'␣:␣'Closed'",
			'  [6:36]>[6:37](114,115)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: false',
			"[7:2]>[7:63](117,178)x-html: x-html=\"open␣?␣'<span>Opened</span>'␣:␣'<span>Closed</span>'\"",
			'  [6:37]>[7:2](115,117)bN: ⏎→',
			'  [7:2]>[7:8](117,123)name: x-html',
			'  [7:8]>[7:8](123,123)bE: ',
			'  [7:8]>[7:9](123,124)equal: =',
			'  [7:9]>[7:9](124,124)aE: ',
			'  [7:9]>[7:10](124,125)sQ: "',
			"  [7:10]>[7:62](125,177)value: open␣?␣'<span>Opened</span>'␣:␣'<span>Closed</span>'",
			'  [7:62]>[7:63](177,178)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[8:2]>[8:16](180,194)x-model: x-model="open"',
			'  [7:63]>[8:2](178,180)bN: ⏎→',
			'  [8:2]>[8:9](180,187)name: x-model',
			'  [8:9]>[8:9](187,187)bE: ',
			'  [8:9]>[8:10](187,188)equal: =',
			'  [8:10]>[8:10](188,188)aE: ',
			'  [8:10]>[8:11](188,189)sQ: "',
			'  [8:11]>[8:15](189,193)value: open',
			'  [8:15]>[8:16](193,194)eQ: "',
			'  isDirective: false',
			'  isDynamicValue: false',
			'[9:2]>[9:20](196,214)x-modelable: x-modelable="open"',
			'  [8:16]>[9:2](194,196)bN: ⏎→',
			'  [9:2]>[9:13](196,207)name: x-modelable',
			'  [9:13]>[9:13](207,207)bE: ',
			'  [9:13]>[9:14](207,208)equal: =',
			'  [9:14]>[9:14](208,208)aE: ',
			'  [9:14]>[9:15](208,209)sQ: "',
			'  [9:15]>[9:19](209,213)value: open',
			'  [9:19]>[9:20](213,214)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[10:2]>[10:23](216,237)x-for: x-for="item␣in␣items"',
			'  [9:20]>[10:2](214,216)bN: ⏎→',
			'  [10:2]>[10:7](216,221)name: x-for',
			'  [10:7]>[10:7](221,221)bE: ',
			'  [10:7]>[10:8](221,222)equal: =',
			'  [10:8]>[10:8](222,222)aE: ',
			'  [10:8]>[10:9](222,223)sQ: "',
			'  [10:9]>[10:22](223,236)value: item␣in␣items',
			'  [10:22]>[10:23](236,237)eQ: "',
			'  isDirective: false',
			'  isDynamicValue: false',
			'[11:2]>[11:44](239,281)x-effect: x-effect="()␣=>␣{␣console.log(\'effect\')␣}"',
			'  [10:23]>[11:2](237,239)bN: ⏎→',
			'  [11:2]>[11:10](239,247)name: x-effect',
			'  [11:10]>[11:10](247,247)bE: ',
			'  [11:10]>[11:11](247,248)equal: =',
			'  [11:11]>[11:11](248,248)aE: ',
			'  [11:11]>[11:12](248,249)sQ: "',
			"  [11:12]>[11:43](249,280)value: ()␣=>␣{␣console.log('effect')␣}",
			'  [11:43]>[11:44](280,281)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[12:2]>[12:10](283,291)x-ignore: x-ignore',
			'  [11:44]>[12:2](281,283)bN: ⏎→',
			'  [12:2]>[12:10](283,291)name: x-ignore',
			'  [12:10]>[12:10](291,291)bE: ',
			'  [12:10]>[12:10](291,291)equal: ',
			'  [12:10]>[12:10](291,291)aE: ',
			'  [12:10]>[12:10](291,291)sQ: ',
			'  [12:10]>[12:10](291,291)value: ',
			'  [12:10]>[12:10](291,291)eQ: ',
			'  isDirective: true',
			'  isDynamicValue: false',
			'  valueType: boolean',
			'[13:2]>[13:14](293,305)x-ref: x-ref="open"',
			'  [12:10]>[13:2](291,293)bN: ⏎→',
			'  [13:2]>[13:7](293,298)name: x-ref',
			'  [13:7]>[13:7](298,298)bE: ',
			'  [13:7]>[13:8](298,299)equal: =',
			'  [13:8]>[13:8](299,299)aE: ',
			'  [13:8]>[13:9](299,300)sQ: "',
			'  [13:9]>[13:13](300,304)value: open',
			'  [13:13]>[13:14](304,305)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[14:2]>[14:9](307,314)x-cloak: x-cloak',
			'  [13:14]>[14:2](305,307)bN: ⏎→',
			'  [14:2]>[14:9](307,314)name: x-cloak',
			'  [14:9]>[14:9](314,314)bE: ',
			'  [14:9]>[14:9](314,314)equal: ',
			'  [14:9]>[14:9](314,314)aE: ',
			'  [14:9]>[14:9](314,314)sQ: ',
			'  [14:9]>[14:9](314,314)value: ',
			'  [14:9]>[14:9](314,314)eQ: ',
			'  isDirective: true',
			'  isDynamicValue: false',
			'  valueType: boolean',
			'[15:2]>[15:19](316,333)x-teleport: x-teleport="body"',
			'  [14:9]>[15:2](314,316)bN: ⏎→',
			'  [15:2]>[15:12](316,326)name: x-teleport',
			'  [15:12]>[15:12](326,326)bE: ',
			'  [15:12]>[15:13](326,327)equal: =',
			'  [15:13]>[15:13](327,327)aE: ',
			'  [15:13]>[15:14](327,328)sQ: "',
			'  [15:14]>[15:18](328,332)value: body',
			'  [15:18]>[15:19](332,333)eQ: "',
			'  isDirective: false',
			'  isDynamicValue: false',
			'[16:2]>[16:13](335,346)x-if: x-if="open"',
			'  [15:19]>[16:2](333,335)bN: ⏎→',
			'  [16:2]>[16:6](335,339)name: x-if',
			'  [16:6]>[16:6](339,339)bE: ',
			'  [16:6]>[16:7](339,340)equal: =',
			'  [16:7]>[16:7](340,340)aE: ',
			'  [16:7]>[16:8](340,341)sQ: "',
			'  [16:8]>[16:12](341,345)value: open',
			'  [16:12]>[16:13](345,346)eQ: "',
			'  isDirective: false',
			'  isDynamicValue: false',
			'[17:2]>[17:11](348,357)x-id: x-id="id"',
			'  [16:13]>[17:2](346,348)bN: ⏎→',
			'  [17:2]>[17:6](348,352)name: x-id',
			'  [17:6]>[17:6](352,352)bE: ',
			'  [17:6]>[17:7](352,353)equal: =',
			'  [17:7]>[17:7](353,353)aE: ',
			'  [17:7]>[17:8](353,354)sQ: "',
			'  [17:8]>[17:10](354,356)value: id',
			'  [17:10]>[17:11](356,357)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[18:2]>[18:8](359,365)div: </div>',
		]);
	});

	test('x-bind', () => {
		const doc = parse(`
<div
	x-bind:class="{'text-red-500': open, 'text-green-500': !open}"
	x-bind:style="{'color': open ? 'red' : 'green'}"
	x-bind:aria-label="open ? 'Opened' : 'Closed'"
	x-bind:aria-hidden="!open"
	:aria-labelledby="'label-' + id"
	:aria-describedby="id"
></div>`);
		expect(nodeListToDebugMaps(doc.nodeList, true)).toStrictEqual([
			'[1:1]>[2:1](0,1)#text: ⏎',
			"[2:1]>[9:2](1,255)div: <div⏎→x-bind:class=\"{'text-red-500':␣open,␣'text-green-500':␣!open}\"⏎→x-bind:style=\"{'color':␣open␣?␣'red'␣:␣'green'}\"⏎→x-bind:aria-label=\"open␣?␣'Opened'␣:␣'Closed'\"⏎→x-bind:aria-hidden=\"!open\"⏎→:aria-labelledby=\"'label-'␣+␣id\"⏎→:aria-describedby=\"id\"⏎>",
			"[3:2]>[3:64](7,69)class: x-bind:class=\"{'text-red-500':␣open,␣'text-green-500':␣!open}\"",
			'  [2:5]>[3:2](5,7)bN: ⏎→',
			'  [3:2]>[3:14](7,19)name: x-bind:class',
			'  [3:14]>[3:14](19,19)bE: ',
			'  [3:14]>[3:15](19,20)equal: =',
			'  [3:15]>[3:15](20,20)aE: ',
			'  [3:15]>[3:16](20,21)sQ: "',
			"  [3:16]>[3:63](21,68)value: {'text-red-500':␣open,␣'text-green-500':␣!open}",
			'  [3:63]>[3:64](68,69)eQ: "',
			'  isDirective: false',
			'  isDynamicValue: true',
			'  potentialName: class',
			'  valueType: code',
			"[4:2]>[4:50](71,119)style: x-bind:style=\"{'color':␣open␣?␣'red'␣:␣'green'}\"",
			'  [3:64]>[4:2](69,71)bN: ⏎→',
			'  [4:2]>[4:14](71,83)name: x-bind:style',
			'  [4:14]>[4:14](83,83)bE: ',
			'  [4:14]>[4:15](83,84)equal: =',
			'  [4:15]>[4:15](84,84)aE: ',
			'  [4:15]>[4:16](84,85)sQ: "',
			"  [4:16]>[4:49](85,118)value: {'color':␣open␣?␣'red'␣:␣'green'}",
			'  [4:49]>[4:50](118,119)eQ: "',
			'  isDirective: false',
			'  isDynamicValue: true',
			'  potentialName: style',
			'  valueType: code',
			"[5:2]>[5:48](121,167)aria-label: x-bind:aria-label=\"open␣?␣'Opened'␣:␣'Closed'\"",
			'  [4:50]>[5:2](119,121)bN: ⏎→',
			'  [5:2]>[5:19](121,138)name: x-bind:aria-label',
			'  [5:19]>[5:19](138,138)bE: ',
			'  [5:19]>[5:20](138,139)equal: =',
			'  [5:20]>[5:20](139,139)aE: ',
			'  [5:20]>[5:21](139,140)sQ: "',
			"  [5:21]>[5:47](140,166)value: open␣?␣'Opened'␣:␣'Closed'",
			'  [5:47]>[5:48](166,167)eQ: "',
			'  isDirective: false',
			'  isDynamicValue: true',
			'  potentialName: aria-label',
			'  valueType: code',
			'[6:2]>[6:28](169,195)aria-hidden: x-bind:aria-hidden="!open"',
			'  [5:48]>[6:2](167,169)bN: ⏎→',
			'  [6:2]>[6:20](169,187)name: x-bind:aria-hidden',
			'  [6:20]>[6:20](187,187)bE: ',
			'  [6:20]>[6:21](187,188)equal: =',
			'  [6:21]>[6:21](188,188)aE: ',
			'  [6:21]>[6:22](188,189)sQ: "',
			'  [6:22]>[6:27](189,194)value: !open',
			'  [6:27]>[6:28](194,195)eQ: "',
			'  isDirective: false',
			'  isDynamicValue: true',
			'  potentialName: aria-hidden',
			'  valueType: code',
			'[7:2]>[7:34](197,229)aria-labelledby: :aria-labelledby="\'label-\'␣+␣id"',
			'  [6:28]>[7:2](195,197)bN: ⏎→',
			'  [7:2]>[7:18](197,213)name: :aria-labelledby',
			'  [7:18]>[7:18](213,213)bE: ',
			'  [7:18]>[7:19](213,214)equal: =',
			'  [7:19]>[7:19](214,214)aE: ',
			'  [7:19]>[7:20](214,215)sQ: "',
			"  [7:20]>[7:33](215,228)value: 'label-'␣+␣id",
			'  [7:33]>[7:34](228,229)eQ: "',
			'  isDirective: false',
			'  isDynamicValue: true',
			'  potentialName: aria-labelledby',
			'  valueType: code',
			'[8:2]>[8:24](231,253)aria-describedby: :aria-describedby="id"',
			'  [7:34]>[8:2](229,231)bN: ⏎→',
			'  [8:2]>[8:19](231,248)name: :aria-describedby',
			'  [8:19]>[8:19](248,248)bE: ',
			'  [8:19]>[8:20](248,249)equal: =',
			'  [8:20]>[8:20](249,249)aE: ',
			'  [8:20]>[8:21](249,250)sQ: "',
			'  [8:21]>[8:23](250,252)value: id',
			'  [8:23]>[8:24](252,253)eQ: "',
			'  isDirective: false',
			'  isDynamicValue: true',
			'  potentialName: aria-describedby',
			'  valueType: code',
			'[9:2]>[9:8](255,261)div: </div>',
		]);
	});

	test('x-on', () => {
		const doc = parse(`
<button x-on:click="alert('Hello World!')">Say Hi</button>
<button @click="alert('Hello World!')">Say Hi</button>
<button @click="alert($event.target.getAttribute('message'))" message="Hello World">Say Hi</button>
<button @click="handleClick">...</button>
<input type="text" @keyup.enter="alert('Submitted!')">
<input type="text" @keyup.shift.enter="alert('Submitted!')">
<input type="text" @keyup.page-down="alert('Submitted!')">
<div x-data @foo="alert('Button Was Clicked!')">
    <button @click="$event.target.dispatchEvent(new CustomEvent('foo', { bubbles: true }))">...</button>
</div>
<div x-data @foo="alert('Button Was Clicked!')">
    <button @click="$dispatch('foo')">...</button>
</div>
<form @submit.prevent="console.log('submitted')" action="/foo">
    <button>Submit</button>
</form>
<div @click="console.log('I will not get logged')">
    <button @click.stop>Click Me</button>
</div>
<div x-data="{ open: false }">
    <button @click="open = ! open">Toggle</button>

    <div x-show="open" @click.outside="open = false">
        Contents...
    </div>
</div>
<div @keyup.escape.window="...">...</div>
<button @click.once="console.log('I will only log once')">...</button>
<input @input.debounce="fetchResults">
<input @input.debounce.500ms="fetchResults">
<div @scroll.window.throttle="handleScroll">...</div>
<div @scroll.window.throttle.750ms="handleScroll">...</div>
<button @click.self="handleClick">
    Click Me

    <img src="...">
</button>
<div @custom-event.camel="handleCustomEvent">
    ...
</div>
<div @custom-event.dot="handleCustomEvent">
    ...
</div>
<div @touchstart.passive="...">...</div>
<div @click.capture="console.log('I will log first')">
    <button @click="console.log('I will log second')"></button>
</div>
`);

		expect(nodeListToDebugMaps(doc.nodeList, true)).toStrictEqual([
			'[1:1]>[2:1](0,1)#text: ⏎',
			'[2:1]>[2:44](1,44)button: <button␣x-on:click="alert(\'Hello␣World!\')">',
			'[2:9]>[2:43](9,43)onclick: x-on:click="alert(\'Hello␣World!\')"',
			'  [2:8]>[2:9](8,9)bN: ␣',
			'  [2:9]>[2:19](9,19)name: x-on:click',
			'  [2:19]>[2:19](19,19)bE: ',
			'  [2:19]>[2:20](19,20)equal: =',
			'  [2:20]>[2:20](20,20)aE: ',
			'  [2:20]>[2:21](20,21)sQ: "',
			"  [2:21]>[2:42](21,42)value: alert('Hello␣World!')",
			'  [2:42]>[2:43](42,43)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: onclick',
			'[2:44]>[2:50](44,50)#text: Say␣Hi',
			'[2:50]>[2:59](50,59)button: </button>',
			'[2:59]>[3:1](59,60)#text: ⏎',
			'[3:1]>[3:40](60,99)button: <button␣@click="alert(\'Hello␣World!\')">',
			'[3:9]>[3:39](68,98)onclick: @click="alert(\'Hello␣World!\')"',
			'  [3:8]>[3:9](67,68)bN: ␣',
			'  [3:9]>[3:15](68,74)name: @click',
			'  [3:15]>[3:15](74,74)bE: ',
			'  [3:15]>[3:16](74,75)equal: =',
			'  [3:16]>[3:16](75,75)aE: ',
			'  [3:16]>[3:17](75,76)sQ: "',
			"  [3:17]>[3:38](76,97)value: alert('Hello␣World!')",
			'  [3:38]>[3:39](97,98)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: onclick',
			'[3:40]>[3:46](99,105)#text: Say␣Hi',
			'[3:46]>[3:55](105,114)button: </button>',
			'[3:55]>[4:1](114,115)#text: ⏎',
			'[4:1]>[4:85](115,199)button: <button␣@click="alert($event.target.getAttribute(\'message\'))"␣message="Hello␣World">',
			'[4:9]>[4:62](123,176)onclick: @click="alert($event.target.getAttribute(\'message\'))"',
			'  [4:8]>[4:9](122,123)bN: ␣',
			'  [4:9]>[4:15](123,129)name: @click',
			'  [4:15]>[4:15](129,129)bE: ',
			'  [4:15]>[4:16](129,130)equal: =',
			'  [4:16]>[4:16](130,130)aE: ',
			'  [4:16]>[4:17](130,131)sQ: "',
			"  [4:17]>[4:61](131,175)value: alert($event.target.getAttribute('message'))",
			'  [4:61]>[4:62](175,176)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: onclick',
			'[4:63]>[4:84](177,198)message: message="Hello␣World"',
			'  [4:62]>[4:63](176,177)bN: ␣',
			'  [4:63]>[4:70](177,184)name: message',
			'  [4:70]>[4:70](184,184)bE: ',
			'  [4:70]>[4:71](184,185)equal: =',
			'  [4:71]>[4:71](185,185)aE: ',
			'  [4:71]>[4:72](185,186)sQ: "',
			'  [4:72]>[4:83](186,197)value: Hello␣World',
			'  [4:83]>[4:84](197,198)eQ: "',
			'  isDirective: false',
			'  isDynamicValue: false',
			'[4:85]>[4:91](199,205)#text: Say␣Hi',
			'[4:91]>[4:100](205,214)button: </button>',
			'[4:100]>[5:1](214,215)#text: ⏎',
			'[5:1]>[5:30](215,244)button: <button␣@click="handleClick">',
			'[5:9]>[5:29](223,243)onclick: @click="handleClick"',
			'  [5:8]>[5:9](222,223)bN: ␣',
			'  [5:9]>[5:15](223,229)name: @click',
			'  [5:15]>[5:15](229,229)bE: ',
			'  [5:15]>[5:16](229,230)equal: =',
			'  [5:16]>[5:16](230,230)aE: ',
			'  [5:16]>[5:17](230,231)sQ: "',
			'  [5:17]>[5:28](231,242)value: handleClick',
			'  [5:28]>[5:29](242,243)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: onclick',
			'[5:30]>[5:33](244,247)#text: ...',
			'[5:33]>[5:42](247,256)button: </button>',
			'[5:42]>[6:1](256,257)#text: ⏎',
			'[6:1]>[6:55](257,311)input: <input␣type="text"␣@keyup.enter="alert(\'Submitted!\')">',
			'[6:8]>[6:19](264,275)type: type="text"',
			'  [6:7]>[6:8](263,264)bN: ␣',
			'  [6:8]>[6:12](264,268)name: type',
			'  [6:12]>[6:12](268,268)bE: ',
			'  [6:12]>[6:13](268,269)equal: =',
			'  [6:13]>[6:13](269,269)aE: ',
			'  [6:13]>[6:14](269,270)sQ: "',
			'  [6:14]>[6:18](270,274)value: text',
			'  [6:18]>[6:19](274,275)eQ: "',
			'  isDirective: false',
			'  isDynamicValue: false',
			'[6:20]>[6:54](276,310)onkeyup: @keyup.enter="alert(\'Submitted!\')"',
			'  [6:19]>[6:20](275,276)bN: ␣',
			'  [6:20]>[6:32](276,288)name: @keyup.enter',
			'  [6:32]>[6:32](288,288)bE: ',
			'  [6:32]>[6:33](288,289)equal: =',
			'  [6:33]>[6:33](289,289)aE: ',
			'  [6:33]>[6:34](289,290)sQ: "',
			"  [6:34]>[6:53](290,309)value: alert('Submitted!')",
			'  [6:53]>[6:54](309,310)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: onkeyup',
			'[6:55]>[7:1](311,312)#text: ⏎',
			'[7:1]>[7:61](312,372)input: <input␣type="text"␣@keyup.shift.enter="alert(\'Submitted!\')">',
			'[7:8]>[7:19](319,330)type: type="text"',
			'  [7:7]>[7:8](318,319)bN: ␣',
			'  [7:8]>[7:12](319,323)name: type',
			'  [7:12]>[7:12](323,323)bE: ',
			'  [7:12]>[7:13](323,324)equal: =',
			'  [7:13]>[7:13](324,324)aE: ',
			'  [7:13]>[7:14](324,325)sQ: "',
			'  [7:14]>[7:18](325,329)value: text',
			'  [7:18]>[7:19](329,330)eQ: "',
			'  isDirective: false',
			'  isDynamicValue: false',
			'[7:20]>[7:60](331,371)onkeyup: @keyup.shift.enter="alert(\'Submitted!\')"',
			'  [7:19]>[7:20](330,331)bN: ␣',
			'  [7:20]>[7:38](331,349)name: @keyup.shift.enter',
			'  [7:38]>[7:38](349,349)bE: ',
			'  [7:38]>[7:39](349,350)equal: =',
			'  [7:39]>[7:39](350,350)aE: ',
			'  [7:39]>[7:40](350,351)sQ: "',
			"  [7:40]>[7:59](351,370)value: alert('Submitted!')",
			'  [7:59]>[7:60](370,371)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: onkeyup',
			'[7:61]>[8:1](372,373)#text: ⏎',
			'[8:1]>[8:59](373,431)input: <input␣type="text"␣@keyup.page-down="alert(\'Submitted!\')">',
			'[8:8]>[8:19](380,391)type: type="text"',
			'  [8:7]>[8:8](379,380)bN: ␣',
			'  [8:8]>[8:12](380,384)name: type',
			'  [8:12]>[8:12](384,384)bE: ',
			'  [8:12]>[8:13](384,385)equal: =',
			'  [8:13]>[8:13](385,385)aE: ',
			'  [8:13]>[8:14](385,386)sQ: "',
			'  [8:14]>[8:18](386,390)value: text',
			'  [8:18]>[8:19](390,391)eQ: "',
			'  isDirective: false',
			'  isDynamicValue: false',
			'[8:20]>[8:58](392,430)onkeyup: @keyup.page-down="alert(\'Submitted!\')"',
			'  [8:19]>[8:20](391,392)bN: ␣',
			'  [8:20]>[8:36](392,408)name: @keyup.page-down',
			'  [8:36]>[8:36](408,408)bE: ',
			'  [8:36]>[8:37](408,409)equal: =',
			'  [8:37]>[8:37](409,409)aE: ',
			'  [8:37]>[8:38](409,410)sQ: "',
			"  [8:38]>[8:57](410,429)value: alert('Submitted!')",
			'  [8:57]>[8:58](429,430)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: onkeyup',
			'[8:59]>[9:1](431,432)#text: ⏎',
			'[9:1]>[9:49](432,480)div: <div␣x-data␣@foo="alert(\'Button␣Was␣Clicked!\')">',
			'[9:6]>[9:12](437,443)x-data: x-data',
			'  [9:5]>[9:6](436,437)bN: ␣',
			'  [9:6]>[9:12](437,443)name: x-data',
			'  [9:12]>[9:12](443,443)bE: ',
			'  [9:12]>[9:12](443,443)equal: ',
			'  [9:12]>[9:12](443,443)aE: ',
			'  [9:12]>[9:12](443,443)sQ: ',
			'  [9:12]>[9:12](443,443)value: ',
			'  [9:12]>[9:12](443,443)eQ: ',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[9:13]>[9:48](444,479)onfoo: @foo="alert(\'Button␣Was␣Clicked!\')"', // cspell:disable-line
			'  [9:12]>[9:13](443,444)bN: ␣',
			'  [9:13]>[9:17](444,448)name: @foo',
			'  [9:17]>[9:17](448,448)bE: ',
			'  [9:17]>[9:18](448,449)equal: =',
			'  [9:18]>[9:18](449,449)aE: ',
			'  [9:18]>[9:19](449,450)sQ: "',
			"  [9:19]>[9:47](450,478)value: alert('Button␣Was␣Clicked!')",
			'  [9:47]>[9:48](478,479)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: onfoo', // cspell:disable-line
			'[9:49]>[10:5](480,485)#text: ⏎␣␣␣␣',
			'[10:5]>[10:93](485,573)button: <button␣@click="$event.target.dispatchEvent(new␣CustomEvent(\'foo\',␣{␣bubbles:␣true␣}))">',
			'[10:13]>[10:92](493,572)onclick: @click="$event.target.dispatchEvent(new␣CustomEvent(\'foo\',␣{␣bubbles:␣true␣}))"',
			'  [10:12]>[10:13](492,493)bN: ␣',
			'  [10:13]>[10:19](493,499)name: @click',
			'  [10:19]>[10:19](499,499)bE: ',
			'  [10:19]>[10:20](499,500)equal: =',
			'  [10:20]>[10:20](500,500)aE: ',
			'  [10:20]>[10:21](500,501)sQ: "',
			"  [10:21]>[10:91](501,571)value: $event.target.dispatchEvent(new␣CustomEvent('foo',␣{␣bubbles:␣true␣}))",
			'  [10:91]>[10:92](571,572)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: onclick',
			'[10:93]>[10:96](573,576)#text: ...',
			'[10:96]>[10:105](576,585)button: </button>',
			'[10:105]>[11:1](585,586)#text: ⏎',
			'[11:1]>[11:7](586,592)div: </div>',
			'[11:7]>[12:1](592,593)#text: ⏎',
			'[12:1]>[12:49](593,641)div: <div␣x-data␣@foo="alert(\'Button␣Was␣Clicked!\')">',
			'[12:6]>[12:12](598,604)x-data: x-data',
			'  [12:5]>[12:6](597,598)bN: ␣',
			'  [12:6]>[12:12](598,604)name: x-data',
			'  [12:12]>[12:12](604,604)bE: ',
			'  [12:12]>[12:12](604,604)equal: ',
			'  [12:12]>[12:12](604,604)aE: ',
			'  [12:12]>[12:12](604,604)sQ: ',
			'  [12:12]>[12:12](604,604)value: ',
			'  [12:12]>[12:12](604,604)eQ: ',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[12:13]>[12:48](605,640)onfoo: @foo="alert(\'Button␣Was␣Clicked!\')"', // cspell:disable-line
			'  [12:12]>[12:13](604,605)bN: ␣',
			'  [12:13]>[12:17](605,609)name: @foo',
			'  [12:17]>[12:17](609,609)bE: ',
			'  [12:17]>[12:18](609,610)equal: =',
			'  [12:18]>[12:18](610,610)aE: ',
			'  [12:18]>[12:19](610,611)sQ: "',
			"  [12:19]>[12:47](611,639)value: alert('Button␣Was␣Clicked!')",
			'  [12:47]>[12:48](639,640)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: onfoo', // cspell:disable-line
			'[12:49]>[13:5](641,646)#text: ⏎␣␣␣␣',
			'[13:5]>[13:39](646,680)button: <button␣@click="$dispatch(\'foo\')">',
			'[13:13]>[13:38](654,679)onclick: @click="$dispatch(\'foo\')"',
			'  [13:12]>[13:13](653,654)bN: ␣',
			'  [13:13]>[13:19](654,660)name: @click',
			'  [13:19]>[13:19](660,660)bE: ',
			'  [13:19]>[13:20](660,661)equal: =',
			'  [13:20]>[13:20](661,661)aE: ',
			'  [13:20]>[13:21](661,662)sQ: "',
			"  [13:21]>[13:37](662,678)value: $dispatch('foo')",
			'  [13:37]>[13:38](678,679)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: onclick',
			'[13:39]>[13:42](680,683)#text: ...',
			'[13:42]>[13:51](683,692)button: </button>',
			'[13:51]>[14:1](692,693)#text: ⏎',
			'[14:1]>[14:7](693,699)div: </div>',
			'[14:7]>[15:1](699,700)#text: ⏎',
			'[15:1]>[15:64](700,763)form: <form␣@submit.prevent="console.log(\'submitted\')"␣action="/foo">',
			'[15:7]>[15:49](706,748)onsubmit: @submit.prevent="console.log(\'submitted\')"',
			'  [15:6]>[15:7](705,706)bN: ␣',
			'  [15:7]>[15:22](706,721)name: @submit.prevent',
			'  [15:22]>[15:22](721,721)bE: ',
			'  [15:22]>[15:23](721,722)equal: =',
			'  [15:23]>[15:23](722,722)aE: ',
			'  [15:23]>[15:24](722,723)sQ: "',
			"  [15:24]>[15:48](723,747)value: console.log('submitted')",
			'  [15:48]>[15:49](747,748)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: onsubmit',
			'[15:50]>[15:63](749,762)action: action="/foo"',
			'  [15:49]>[15:50](748,749)bN: ␣',
			'  [15:50]>[15:56](749,755)name: action',
			'  [15:56]>[15:56](755,755)bE: ',
			'  [15:56]>[15:57](755,756)equal: =',
			'  [15:57]>[15:57](756,756)aE: ',
			'  [15:57]>[15:58](756,757)sQ: "',
			'  [15:58]>[15:62](757,761)value: /foo',
			'  [15:62]>[15:63](761,762)eQ: "',
			'  isDirective: false',
			'  isDynamicValue: false',
			'[15:64]>[16:5](763,768)#text: ⏎␣␣␣␣',
			'[16:5]>[16:13](768,776)button: <button>',
			'[16:13]>[16:19](776,782)#text: Submit',
			'[16:19]>[16:28](782,791)button: </button>',
			'[16:28]>[17:1](791,792)#text: ⏎',
			'[17:1]>[17:8](792,799)form: </form>',
			'[17:8]>[18:1](799,800)#text: ⏎',
			'[18:1]>[18:52](800,851)div: <div␣@click="console.log(\'I␣will␣not␣get␣logged\')">',
			'[18:6]>[18:51](805,850)onclick: @click="console.log(\'I␣will␣not␣get␣logged\')"',
			'  [18:5]>[18:6](804,805)bN: ␣',
			'  [18:6]>[18:12](805,811)name: @click',
			'  [18:12]>[18:12](811,811)bE: ',
			'  [18:12]>[18:13](811,812)equal: =',
			'  [18:13]>[18:13](812,812)aE: ',
			'  [18:13]>[18:14](812,813)sQ: "',
			"  [18:14]>[18:50](813,849)value: console.log('I␣will␣not␣get␣logged')",
			'  [18:50]>[18:51](849,850)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: onclick',
			'[18:52]>[19:5](851,856)#text: ⏎␣␣␣␣',
			'[19:5]>[19:25](856,876)button: <button␣@click.stop>',
			'[19:13]>[19:24](864,875)onclick: @click.stop',
			'  [19:12]>[19:13](863,864)bN: ␣',
			'  [19:13]>[19:24](864,875)name: @click.stop',
			'  [19:24]>[19:24](875,875)bE: ',
			'  [19:24]>[19:24](875,875)equal: ',
			'  [19:24]>[19:24](875,875)aE: ',
			'  [19:24]>[19:24](875,875)sQ: ',
			'  [19:24]>[19:24](875,875)value: ',
			'  [19:24]>[19:24](875,875)eQ: ',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: onclick',
			'[19:25]>[19:33](876,884)#text: Click␣Me',
			'[19:33]>[19:42](884,893)button: </button>',
			'[19:42]>[20:1](893,894)#text: ⏎',
			'[20:1]>[20:7](894,900)div: </div>',
			'[20:7]>[21:1](900,901)#text: ⏎',
			'[21:1]>[21:31](901,931)div: <div␣x-data="{␣open:␣false␣}">',
			'[21:6]>[21:30](906,930)x-data: x-data="{␣open:␣false␣}"',
			'  [21:5]>[21:6](905,906)bN: ␣',
			'  [21:6]>[21:12](906,912)name: x-data',
			'  [21:12]>[21:12](912,912)bE: ',
			'  [21:12]>[21:13](912,913)equal: =',
			'  [21:13]>[21:13](913,913)aE: ',
			'  [21:13]>[21:14](913,914)sQ: "',
			'  [21:14]>[21:29](914,929)value: {␣open:␣false␣}',
			'  [21:29]>[21:30](929,930)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[21:31]>[22:5](931,936)#text: ⏎␣␣␣␣',
			'[22:5]>[22:36](936,967)button: <button␣@click="open␣=␣!␣open">',
			'[22:13]>[22:35](944,966)onclick: @click="open␣=␣!␣open"',
			'  [22:12]>[22:13](943,944)bN: ␣',
			'  [22:13]>[22:19](944,950)name: @click',
			'  [22:19]>[22:19](950,950)bE: ',
			'  [22:19]>[22:20](950,951)equal: =',
			'  [22:20]>[22:20](951,951)aE: ',
			'  [22:20]>[22:21](951,952)sQ: "',
			'  [22:21]>[22:34](952,965)value: open␣=␣!␣open',
			'  [22:34]>[22:35](965,966)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: onclick',
			'[22:36]>[22:42](967,973)#text: Toggle',
			'[22:42]>[22:51](973,982)button: </button>',
			'[22:51]>[24:5](982,988)#text: ⏎⏎␣␣␣␣',
			'[24:5]>[24:54](988,1037)div: <div␣x-show="open"␣@click.outside="open␣=␣false">',
			'[24:10]>[24:23](993,1006)x-show: x-show="open"',
			'  [24:9]>[24:10](992,993)bN: ␣',
			'  [24:10]>[24:16](993,999)name: x-show',
			'  [24:16]>[24:16](999,999)bE: ',
			'  [24:16]>[24:17](999,1000)equal: =',
			'  [24:17]>[24:17](1000,1000)aE: ',
			'  [24:17]>[24:18](1000,1001)sQ: "',
			'  [24:18]>[24:22](1001,1005)value: open',
			'  [24:22]>[24:23](1005,1006)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[24:24]>[24:53](1007,1036)onclick: @click.outside="open␣=␣false"',
			'  [24:23]>[24:24](1006,1007)bN: ␣',
			'  [24:24]>[24:38](1007,1021)name: @click.outside',
			'  [24:38]>[24:38](1021,1021)bE: ',
			'  [24:38]>[24:39](1021,1022)equal: =',
			'  [24:39]>[24:39](1022,1022)aE: ',
			'  [24:39]>[24:40](1022,1023)sQ: "',
			'  [24:40]>[24:52](1023,1035)value: open␣=␣false',
			'  [24:52]>[24:53](1035,1036)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: onclick',
			'[24:54]>[26:5](1037,1062)#text: ⏎␣␣␣␣␣␣␣␣Contents...⏎␣␣␣␣',
			'[26:5]>[26:11](1062,1068)div: </div>',
			'[26:11]>[27:1](1068,1069)#text: ⏎',
			'[27:1]>[27:7](1069,1075)div: </div>',
			'[27:7]>[28:1](1075,1076)#text: ⏎',
			'[28:1]>[28:33](1076,1108)div: <div␣@keyup.escape.window="...">',
			'[28:6]>[28:32](1081,1107)onkeyup: @keyup.escape.window="..."',
			'  [28:5]>[28:6](1080,1081)bN: ␣',
			'  [28:6]>[28:26](1081,1101)name: @keyup.escape.window',
			'  [28:26]>[28:26](1101,1101)bE: ',
			'  [28:26]>[28:27](1101,1102)equal: =',
			'  [28:27]>[28:27](1102,1102)aE: ',
			'  [28:27]>[28:28](1102,1103)sQ: "',
			'  [28:28]>[28:31](1103,1106)value: ...',
			'  [28:31]>[28:32](1106,1107)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: onkeyup',
			'[28:33]>[28:36](1108,1111)#text: ...',
			'[28:36]>[28:42](1111,1117)div: </div>',
			'[28:42]>[29:1](1117,1118)#text: ⏎',
			'[29:1]>[29:59](1118,1176)button: <button␣@click.once="console.log(\'I␣will␣only␣log␣once\')">',
			'[29:9]>[29:58](1126,1175)onclick: @click.once="console.log(\'I␣will␣only␣log␣once\')"',
			'  [29:8]>[29:9](1125,1126)bN: ␣',
			'  [29:9]>[29:20](1126,1137)name: @click.once',
			'  [29:20]>[29:20](1137,1137)bE: ',
			'  [29:20]>[29:21](1137,1138)equal: =',
			'  [29:21]>[29:21](1138,1138)aE: ',
			'  [29:21]>[29:22](1138,1139)sQ: "',
			"  [29:22]>[29:57](1139,1174)value: console.log('I␣will␣only␣log␣once')",
			'  [29:57]>[29:58](1174,1175)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: onclick',
			'[29:59]>[29:62](1176,1179)#text: ...',
			'[29:62]>[29:71](1179,1188)button: </button>',
			'[29:71]>[30:1](1188,1189)#text: ⏎',
			'[30:1]>[30:39](1189,1227)input: <input␣@input.debounce="fetchResults">',
			'[30:8]>[30:38](1196,1226)oninput: @input.debounce="fetchResults"',
			'  [30:7]>[30:8](1195,1196)bN: ␣',
			'  [30:8]>[30:23](1196,1211)name: @input.debounce',
			'  [30:23]>[30:23](1211,1211)bE: ',
			'  [30:23]>[30:24](1211,1212)equal: =',
			'  [30:24]>[30:24](1212,1212)aE: ',
			'  [30:24]>[30:25](1212,1213)sQ: "',
			'  [30:25]>[30:37](1213,1225)value: fetchResults',
			'  [30:37]>[30:38](1225,1226)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: oninput',
			'[30:39]>[31:1](1227,1228)#text: ⏎',
			'[31:1]>[31:45](1228,1272)input: <input␣@input.debounce.500ms="fetchResults">',
			'[31:8]>[31:44](1235,1271)oninput: @input.debounce.500ms="fetchResults"',
			'  [31:7]>[31:8](1234,1235)bN: ␣',
			'  [31:8]>[31:29](1235,1256)name: @input.debounce.500ms',
			'  [31:29]>[31:29](1256,1256)bE: ',
			'  [31:29]>[31:30](1256,1257)equal: =',
			'  [31:30]>[31:30](1257,1257)aE: ',
			'  [31:30]>[31:31](1257,1258)sQ: "',
			'  [31:31]>[31:43](1258,1270)value: fetchResults',
			'  [31:43]>[31:44](1270,1271)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: oninput',
			'[31:45]>[32:1](1272,1273)#text: ⏎',
			'[32:1]>[32:45](1273,1317)div: <div␣@scroll.window.throttle="handleScroll">',
			'[32:6]>[32:44](1278,1316)onscroll: @scroll.window.throttle="handleScroll"',
			'  [32:5]>[32:6](1277,1278)bN: ␣',
			'  [32:6]>[32:29](1278,1301)name: @scroll.window.throttle',
			'  [32:29]>[32:29](1301,1301)bE: ',
			'  [32:29]>[32:30](1301,1302)equal: =',
			'  [32:30]>[32:30](1302,1302)aE: ',
			'  [32:30]>[32:31](1302,1303)sQ: "',
			'  [32:31]>[32:43](1303,1315)value: handleScroll',
			'  [32:43]>[32:44](1315,1316)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: onscroll',
			'[32:45]>[32:48](1317,1320)#text: ...',
			'[32:48]>[32:54](1320,1326)div: </div>',
			'[32:54]>[33:1](1326,1327)#text: ⏎',
			'[33:1]>[33:51](1327,1377)div: <div␣@scroll.window.throttle.750ms="handleScroll">',
			'[33:6]>[33:50](1332,1376)onscroll: @scroll.window.throttle.750ms="handleScroll"',
			'  [33:5]>[33:6](1331,1332)bN: ␣',
			'  [33:6]>[33:35](1332,1361)name: @scroll.window.throttle.750ms',
			'  [33:35]>[33:35](1361,1361)bE: ',
			'  [33:35]>[33:36](1361,1362)equal: =',
			'  [33:36]>[33:36](1362,1362)aE: ',
			'  [33:36]>[33:37](1362,1363)sQ: "',
			'  [33:37]>[33:49](1363,1375)value: handleScroll',
			'  [33:49]>[33:50](1375,1376)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: onscroll',
			'[33:51]>[33:54](1377,1380)#text: ...',
			'[33:54]>[33:60](1380,1386)div: </div>',
			'[33:60]>[34:1](1386,1387)#text: ⏎',
			'[34:1]>[34:35](1387,1421)button: <button␣@click.self="handleClick">',
			'[34:9]>[34:34](1395,1420)onclick: @click.self="handleClick"',
			'  [34:8]>[34:9](1394,1395)bN: ␣',
			'  [34:9]>[34:20](1395,1406)name: @click.self',
			'  [34:20]>[34:20](1406,1406)bE: ',
			'  [34:20]>[34:21](1406,1407)equal: =',
			'  [34:21]>[34:21](1407,1407)aE: ',
			'  [34:21]>[34:22](1407,1408)sQ: "',
			'  [34:22]>[34:33](1408,1419)value: handleClick',
			'  [34:33]>[34:34](1419,1420)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: onclick',
			'[34:35]>[37:5](1421,1440)#text: ⏎␣␣␣␣Click␣Me⏎⏎␣␣␣␣',
			'[37:5]>[37:20](1440,1455)img: <img␣src="...">',
			'[37:10]>[37:19](1445,1454)src: src="..."',
			'  [37:9]>[37:10](1444,1445)bN: ␣',
			'  [37:10]>[37:13](1445,1448)name: src',
			'  [37:13]>[37:13](1448,1448)bE: ',
			'  [37:13]>[37:14](1448,1449)equal: =',
			'  [37:14]>[37:14](1449,1449)aE: ',
			'  [37:14]>[37:15](1449,1450)sQ: "',
			'  [37:15]>[37:18](1450,1453)value: ...',
			'  [37:18]>[37:19](1453,1454)eQ: "',
			'  isDirective: false',
			'  isDynamicValue: false',
			'[37:20]>[38:1](1455,1456)#text: ⏎',
			'[38:1]>[38:10](1456,1465)button: </button>',
			'[38:10]>[39:1](1465,1466)#text: ⏎',
			'[39:1]>[39:46](1466,1511)div: <div␣@custom-event.camel="handleCustomEvent">',
			'[39:6]>[39:45](1471,1510)oncustom-event: @custom-event.camel="handleCustomEvent"', // cspell:disable-line
			'  [39:5]>[39:6](1470,1471)bN: ␣',
			'  [39:6]>[39:25](1471,1490)name: @custom-event.camel',
			'  [39:25]>[39:25](1490,1490)bE: ',
			'  [39:25]>[39:26](1490,1491)equal: =',
			'  [39:26]>[39:26](1491,1491)aE: ',
			'  [39:26]>[39:27](1491,1492)sQ: "',
			'  [39:27]>[39:44](1492,1509)value: handleCustomEvent',
			'  [39:44]>[39:45](1509,1510)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: oncustom-event', // cspell:disable-line
			'[39:46]>[41:1](1511,1520)#text: ⏎␣␣␣␣...⏎',
			'[41:1]>[41:7](1520,1526)div: </div>',
			'[41:7]>[42:1](1526,1527)#text: ⏎',
			'[42:1]>[42:44](1527,1570)div: <div␣@custom-event.dot="handleCustomEvent">',
			'[42:6]>[42:43](1532,1569)oncustom-event: @custom-event.dot="handleCustomEvent"', // cspell:disable-line
			'  [42:5]>[42:6](1531,1532)bN: ␣',
			'  [42:6]>[42:23](1532,1549)name: @custom-event.dot',
			'  [42:23]>[42:23](1549,1549)bE: ',
			'  [42:23]>[42:24](1549,1550)equal: =',
			'  [42:24]>[42:24](1550,1550)aE: ',
			'  [42:24]>[42:25](1550,1551)sQ: "',
			'  [42:25]>[42:42](1551,1568)value: handleCustomEvent',
			'  [42:42]>[42:43](1568,1569)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: oncustom-event', // cspell:disable-line
			'[42:44]>[44:1](1570,1579)#text: ⏎␣␣␣␣...⏎',
			'[44:1]>[44:7](1579,1585)div: </div>',
			'[44:7]>[45:1](1585,1586)#text: ⏎',
			'[45:1]>[45:32](1586,1617)div: <div␣@touchstart.passive="...">',
			'[45:6]>[45:31](1591,1616)ontouchstart: @touchstart.passive="..."',
			'  [45:5]>[45:6](1590,1591)bN: ␣',
			'  [45:6]>[45:25](1591,1610)name: @touchstart.passive',
			'  [45:25]>[45:25](1610,1610)bE: ',
			'  [45:25]>[45:26](1610,1611)equal: =',
			'  [45:26]>[45:26](1611,1611)aE: ',
			'  [45:26]>[45:27](1611,1612)sQ: "',
			'  [45:27]>[45:30](1612,1615)value: ...',
			'  [45:30]>[45:31](1615,1616)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: ontouchstart',
			'[45:32]>[45:35](1617,1620)#text: ...',
			'[45:35]>[45:41](1620,1626)div: </div>',
			'[45:41]>[46:1](1626,1627)#text: ⏎',
			'[46:1]>[46:55](1627,1681)div: <div␣@click.capture="console.log(\'I␣will␣log␣first\')">',
			'[46:6]>[46:54](1632,1680)onclick: @click.capture="console.log(\'I␣will␣log␣first\')"',
			'  [46:5]>[46:6](1631,1632)bN: ␣',
			'  [46:6]>[46:20](1632,1646)name: @click.capture',
			'  [46:20]>[46:20](1646,1646)bE: ',
			'  [46:20]>[46:21](1646,1647)equal: =',
			'  [46:21]>[46:21](1647,1647)aE: ',
			'  [46:21]>[46:22](1647,1648)sQ: "',
			"  [46:22]>[46:53](1648,1679)value: console.log('I␣will␣log␣first')",
			'  [46:53]>[46:54](1679,1680)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: onclick',
			'[46:55]>[47:5](1681,1686)#text: ⏎␣␣␣␣',
			'[47:5]>[47:55](1686,1736)button: <button␣@click="console.log(\'I␣will␣log␣second\')">',
			'[47:13]>[47:54](1694,1735)onclick: @click="console.log(\'I␣will␣log␣second\')"',
			'  [47:12]>[47:13](1693,1694)bN: ␣',
			'  [47:13]>[47:19](1694,1700)name: @click',
			'  [47:19]>[47:19](1700,1700)bE: ',
			'  [47:19]>[47:20](1700,1701)equal: =',
			'  [47:20]>[47:20](1701,1701)aE: ',
			'  [47:20]>[47:21](1701,1702)sQ: "',
			"  [47:21]>[47:53](1702,1734)value: console.log('I␣will␣log␣second')",
			'  [47:53]>[47:54](1734,1735)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: true',
			'  potentialName: onclick',
			'[47:55]>[47:64](1736,1745)button: </button>',
			'[47:64]>[48:1](1745,1746)#text: ⏎',
			'[48:1]>[48:7](1746,1752)div: </div>',
			'[48:7]>[49:1](1752,1753)#text: ⏎',
		]);
	});

	test('x-transition', () => {
		const doc = parse(`
<div
	x-transition
	x-transition.duration.500ms
	x-transition:enter.duration.500ms
	x-transition:leave.duration.400ms
	x-transition.delay.50ms
	x-transition.opacity
	x-transition.scale
	x-transition.scale.80
	x-transition:enter.scale.80
	x-transition:leave.scale.90
	x-transition.scale.origin.top
	x-transition:enter="transition ease-out duration-300"
	x-transition:enter-start="opacity-0 scale-90"
	x-transition:enter-end="opacity-100 scale-100"
	x-transition:leave="transition ease-in duration-300"
	x-transition:leave-start="opacity-100 scale-100"
	x-transition:leave-end="opacity-0 scale-90"
></div>
`);
		expect(nodeListToDebugMaps(doc.nodeList, true)).toStrictEqual([
			'[1:1]>[2:1](0,1)#text: ⏎',
			'[2:1]>[20:2](1,598)div: <div⏎→x-transition⏎→x-transition.duration.500ms⏎→x-transition:enter.duration.500ms⏎→x-transition:leave.duration.400ms⏎→x-transition.delay.50ms⏎→x-transition.opacity⏎→x-transition.scale⏎→x-transition.scale.80⏎→x-transition:enter.scale.80⏎→x-transition:leave.scale.90⏎→x-transition.scale.origin.top⏎→x-transition:enter="transition␣ease-out␣duration-300"⏎→x-transition:enter-start="opacity-0␣scale-90"⏎→x-transition:enter-end="opacity-100␣scale-100"⏎→x-transition:leave="transition␣ease-in␣duration-300"⏎→x-transition:leave-start="opacity-100␣scale-100"⏎→x-transition:leave-end="opacity-0␣scale-90"⏎>',
			'[3:2]>[3:14](7,19)x-transition: x-transition',
			'  [2:5]>[3:2](5,7)bN: ⏎→',
			'  [3:2]>[3:14](7,19)name: x-transition',
			'  [3:14]>[3:14](19,19)bE: ',
			'  [3:14]>[3:14](19,19)equal: ',
			'  [3:14]>[3:14](19,19)aE: ',
			'  [3:14]>[3:14](19,19)sQ: ',
			'  [3:14]>[3:14](19,19)value: ',
			'  [3:14]>[3:14](19,19)eQ: ',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[4:2]>[4:29](21,48)x-transition.duration.500ms: x-transition.duration.500ms',
			'  [3:14]>[4:2](19,21)bN: ⏎→',
			'  [4:2]>[4:29](21,48)name: x-transition.duration.500ms',
			'  [4:29]>[4:29](48,48)bE: ',
			'  [4:29]>[4:29](48,48)equal: ',
			'  [4:29]>[4:29](48,48)aE: ',
			'  [4:29]>[4:29](48,48)sQ: ',
			'  [4:29]>[4:29](48,48)value: ',
			'  [4:29]>[4:29](48,48)eQ: ',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[5:2]>[5:35](50,83)x-transition:enter.duration.500ms: x-transition:enter.duration.500ms',
			'  [4:29]>[5:2](48,50)bN: ⏎→',
			'  [5:2]>[5:35](50,83)name: x-transition:enter.duration.500ms',
			'  [5:35]>[5:35](83,83)bE: ',
			'  [5:35]>[5:35](83,83)equal: ',
			'  [5:35]>[5:35](83,83)aE: ',
			'  [5:35]>[5:35](83,83)sQ: ',
			'  [5:35]>[5:35](83,83)value: ',
			'  [5:35]>[5:35](83,83)eQ: ',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[6:2]>[6:35](85,118)x-transition:leave.duration.400ms: x-transition:leave.duration.400ms',
			'  [5:35]>[6:2](83,85)bN: ⏎→',
			'  [6:2]>[6:35](85,118)name: x-transition:leave.duration.400ms',
			'  [6:35]>[6:35](118,118)bE: ',
			'  [6:35]>[6:35](118,118)equal: ',
			'  [6:35]>[6:35](118,118)aE: ',
			'  [6:35]>[6:35](118,118)sQ: ',
			'  [6:35]>[6:35](118,118)value: ',
			'  [6:35]>[6:35](118,118)eQ: ',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[7:2]>[7:25](120,143)x-transition.delay.50ms: x-transition.delay.50ms',
			'  [6:35]>[7:2](118,120)bN: ⏎→',
			'  [7:2]>[7:25](120,143)name: x-transition.delay.50ms',
			'  [7:25]>[7:25](143,143)bE: ',
			'  [7:25]>[7:25](143,143)equal: ',
			'  [7:25]>[7:25](143,143)aE: ',
			'  [7:25]>[7:25](143,143)sQ: ',
			'  [7:25]>[7:25](143,143)value: ',
			'  [7:25]>[7:25](143,143)eQ: ',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[8:2]>[8:22](145,165)x-transition.opacity: x-transition.opacity',
			'  [7:25]>[8:2](143,145)bN: ⏎→',
			'  [8:2]>[8:22](145,165)name: x-transition.opacity',
			'  [8:22]>[8:22](165,165)bE: ',
			'  [8:22]>[8:22](165,165)equal: ',
			'  [8:22]>[8:22](165,165)aE: ',
			'  [8:22]>[8:22](165,165)sQ: ',
			'  [8:22]>[8:22](165,165)value: ',
			'  [8:22]>[8:22](165,165)eQ: ',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[9:2]>[9:20](167,185)x-transition.scale: x-transition.scale',
			'  [8:22]>[9:2](165,167)bN: ⏎→',
			'  [9:2]>[9:20](167,185)name: x-transition.scale',
			'  [9:20]>[9:20](185,185)bE: ',
			'  [9:20]>[9:20](185,185)equal: ',
			'  [9:20]>[9:20](185,185)aE: ',
			'  [9:20]>[9:20](185,185)sQ: ',
			'  [9:20]>[9:20](185,185)value: ',
			'  [9:20]>[9:20](185,185)eQ: ',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[10:2]>[10:23](187,208)x-transition.scale.80: x-transition.scale.80',
			'  [9:20]>[10:2](185,187)bN: ⏎→',
			'  [10:2]>[10:23](187,208)name: x-transition.scale.80',
			'  [10:23]>[10:23](208,208)bE: ',
			'  [10:23]>[10:23](208,208)equal: ',
			'  [10:23]>[10:23](208,208)aE: ',
			'  [10:23]>[10:23](208,208)sQ: ',
			'  [10:23]>[10:23](208,208)value: ',
			'  [10:23]>[10:23](208,208)eQ: ',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[11:2]>[11:29](210,237)x-transition:enter.scale.80: x-transition:enter.scale.80',
			'  [10:23]>[11:2](208,210)bN: ⏎→',
			'  [11:2]>[11:29](210,237)name: x-transition:enter.scale.80',
			'  [11:29]>[11:29](237,237)bE: ',
			'  [11:29]>[11:29](237,237)equal: ',
			'  [11:29]>[11:29](237,237)aE: ',
			'  [11:29]>[11:29](237,237)sQ: ',
			'  [11:29]>[11:29](237,237)value: ',
			'  [11:29]>[11:29](237,237)eQ: ',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[12:2]>[12:29](239,266)x-transition:leave.scale.90: x-transition:leave.scale.90',
			'  [11:29]>[12:2](237,239)bN: ⏎→',
			'  [12:2]>[12:29](239,266)name: x-transition:leave.scale.90',
			'  [12:29]>[12:29](266,266)bE: ',
			'  [12:29]>[12:29](266,266)equal: ',
			'  [12:29]>[12:29](266,266)aE: ',
			'  [12:29]>[12:29](266,266)sQ: ',
			'  [12:29]>[12:29](266,266)value: ',
			'  [12:29]>[12:29](266,266)eQ: ',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[13:2]>[13:31](268,297)x-transition.scale.origin.top: x-transition.scale.origin.top',
			'  [12:29]>[13:2](266,268)bN: ⏎→',
			'  [13:2]>[13:31](268,297)name: x-transition.scale.origin.top',
			'  [13:31]>[13:31](297,297)bE: ',
			'  [13:31]>[13:31](297,297)equal: ',
			'  [13:31]>[13:31](297,297)aE: ',
			'  [13:31]>[13:31](297,297)sQ: ',
			'  [13:31]>[13:31](297,297)value: ',
			'  [13:31]>[13:31](297,297)eQ: ',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[14:2]>[14:55](299,352)x-transition:enter: x-transition:enter="transition␣ease-out␣duration-300"',
			'  [13:31]>[14:2](297,299)bN: ⏎→',
			'  [14:2]>[14:20](299,317)name: x-transition:enter',
			'  [14:20]>[14:20](317,317)bE: ',
			'  [14:20]>[14:21](317,318)equal: =',
			'  [14:21]>[14:21](318,318)aE: ',
			'  [14:21]>[14:22](318,319)sQ: "',
			'  [14:22]>[14:54](319,351)value: transition␣ease-out␣duration-300',
			'  [14:54]>[14:55](351,352)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[15:2]>[15:47](354,399)x-transition:enter-start: x-transition:enter-start="opacity-0␣scale-90"',
			'  [14:55]>[15:2](352,354)bN: ⏎→',
			'  [15:2]>[15:26](354,378)name: x-transition:enter-start',
			'  [15:26]>[15:26](378,378)bE: ',
			'  [15:26]>[15:27](378,379)equal: =',
			'  [15:27]>[15:27](379,379)aE: ',
			'  [15:27]>[15:28](379,380)sQ: "',
			'  [15:28]>[15:46](380,398)value: opacity-0␣scale-90',
			'  [15:46]>[15:47](398,399)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[16:2]>[16:48](401,447)x-transition:enter-end: x-transition:enter-end="opacity-100␣scale-100"',
			'  [15:47]>[16:2](399,401)bN: ⏎→',
			'  [16:2]>[16:24](401,423)name: x-transition:enter-end',
			'  [16:24]>[16:24](423,423)bE: ',
			'  [16:24]>[16:25](423,424)equal: =',
			'  [16:25]>[16:25](424,424)aE: ',
			'  [16:25]>[16:26](424,425)sQ: "',
			'  [16:26]>[16:47](425,446)value: opacity-100␣scale-100',
			'  [16:47]>[16:48](446,447)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[17:2]>[17:54](449,501)x-transition:leave: x-transition:leave="transition␣ease-in␣duration-300"',
			'  [16:48]>[17:2](447,449)bN: ⏎→',
			'  [17:2]>[17:20](449,467)name: x-transition:leave',
			'  [17:20]>[17:20](467,467)bE: ',
			'  [17:20]>[17:21](467,468)equal: =',
			'  [17:21]>[17:21](468,468)aE: ',
			'  [17:21]>[17:22](468,469)sQ: "',
			'  [17:22]>[17:53](469,500)value: transition␣ease-in␣duration-300',
			'  [17:53]>[17:54](500,501)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[18:2]>[18:50](503,551)x-transition:leave-start: x-transition:leave-start="opacity-100␣scale-100"',
			'  [17:54]>[18:2](501,503)bN: ⏎→',
			'  [18:2]>[18:26](503,527)name: x-transition:leave-start',
			'  [18:26]>[18:26](527,527)bE: ',
			'  [18:26]>[18:27](527,528)equal: =',
			'  [18:27]>[18:27](528,528)aE: ',
			'  [18:27]>[18:28](528,529)sQ: "',
			'  [18:28]>[18:49](529,550)value: opacity-100␣scale-100',
			'  [18:49]>[18:50](550,551)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[19:2]>[19:45](553,596)x-transition:leave-end: x-transition:leave-end="opacity-0␣scale-90"',
			'  [18:50]>[19:2](551,553)bN: ⏎→',
			'  [19:2]>[19:24](553,575)name: x-transition:leave-end',
			'  [19:24]>[19:24](575,575)bE: ',
			'  [19:24]>[19:25](575,576)equal: =',
			'  [19:25]>[19:25](576,576)aE: ',
			'  [19:25]>[19:26](576,577)sQ: "',
			'  [19:26]>[19:44](577,595)value: opacity-0␣scale-90',
			'  [19:44]>[19:45](595,596)eQ: "',
			'  isDirective: true',
			'  isDynamicValue: false',
			'[20:2]>[20:8](598,604)div: </div>',
			'[20:8]>[21:1](604,605)#text: ⏎',
		]);
	});

	test('x-for', () => {
		const doc = parse(`
<ul x-data="{ colors: ['Red', 'Orange', 'Yellow'] }">
	<template x-for="color in colors">
		<li x-text="color"></li>
	</template>
</ul>
`);
		expect(nodeListToDebugMaps(doc.nodeList)).toStrictEqual([
			'[1:1]>[2:1](0,1)#text: ⏎',
			"[2:1]>[2:54](1,54)ul: <ul␣x-data=\"{␣colors:␣['Red',␣'Orange',␣'Yellow']␣}\">",
			'[2:54]>[3:2](54,56)#text: ⏎→',
			'[3:2]>[3:36](56,90)template (each): <template␣x-for="color␣in␣colors">',
			'[3:36]>[4:3](90,93)#text: ⏎→→',
			'[4:3]>[4:22](93,112)li: <li␣x-text="color">',
			'[4:22]>[4:27](112,117)li: </li>',
			'[4:27]>[5:2](117,119)#text: ⏎→',
			'[5:2]>[5:13](119,130)template (end): </template>',
			'[5:13]>[6:1](130,131)#text: ⏎',
			'[6:1]>[6:6](131,136)ul: </ul>',
			'[6:6]>[7:1](136,137)#text: ⏎',
		]);
	});
});
